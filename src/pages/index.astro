---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import Services from '../components/Services.astro';
import Features from '../components/Features.astro';
import FAQ from '../components/FAQ.astro';
import CTA from '../components/CTA.astro';

export const prerender = true;

const seoData = {
  title: "CyberTeckMaster | #1 Cybersecurity Training & Zero Trust Solutions 2025",
  description: "Master cybersecurity with CyberTeckMaster's certified ethical hacking courses, zero trust security solutions, Web3 development, AI chatbots & quantum cryptography. CISSP-ISSAP certified experts. Start your cyber career today!",
  keywords: "cybersecurity training, zero trust security, ethical hacking certification, CISSP course, Web3 development, AI chatbot development, quantum cryptography, cyber security solutions, penetration testing, NIST 800-207, managed security services",
  ogImage: "/images/cyberteckmaster-og-image.webp",
  canonicalURL: "https://cyberteckmaster.com/",
  author: "CyberTeckMaster Team",
  publishedTime: "2025-01-15T10:00:00.000Z",
  modifiedTime: new Date().toISOString(),
  type: "website",
  locale: "en_US"
};

const structuredData = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://cyberteckmaster.com/#organization",
      "name": "CyberTeckMaster",
      "url": "https://cyberteckmaster.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://cyberteckmaster.com/images/logo.webp",
        "width": 300,
        "height": 100
      },
      "sameAs": [
        "https://twitter.com/cyberteckmaster",
        "https://linkedin.com/company/cyberteckmaster",
        "https://github.com/cyberteckmaster",
        "https://youtube.com/@cyberteckmaster"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-800-555-CYBER",
        "contactType": "Customer Service",
        "email": "info@cyberteckmaster.com",
        "availableLanguage": "English"
      },
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "US",
        "addressRegion": "CA",
        "addressLocality": "San Francisco"
      },
      "foundingDate": "2020-01-01",
      "numberOfEmployees": "50-100",
      "description": "Leading cybersecurity training provider specializing in zero trust security, ethical hacking, Web3 development, and quantum cryptography solutions."
    },
    {
      "@type": "WebSite",
      "@id": "https://cyberteckmaster.com/#website",
      "url": "https://cyberteckmaster.com",
      "name": "CyberTeckMaster",
      "publisher": {
        "@id": "https://cyberteckmaster.com/#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://cyberteckmaster.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "inLanguage": "en-US"
    },
    {
      "@type": "WebPage",
      "@id": "https://cyberteckmaster.com/#webpage",
      "url": "https://cyberteckmaster.com",
      "name": "CyberTeckMaster | #1 Cybersecurity Training & Zero Trust Solutions 2025",
      "description": "Master cybersecurity with CyberTeckMaster's certified ethical hacking courses, zero trust security solutions, Web3 development, AI chatbots & quantum cryptography.",
      "isPartOf": {
        "@id": "https://cyberteckmaster.com/#website"
      },
      "about": {
        "@id": "https://cyberteckmaster.com/#organization"
      },
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://cyberteckmaster.com/images/cyberteckmaster-hero.webp"
      },
      "datePublished": "2025-01-15T10:00:00.000Z",
      "dateModified": new Date().toISOString(),
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://cyberteckmaster.com"
          }
        ]
      },
      "speakable": {
        "@type": "SpeakableSpecification",
        "cssSelector": ["h1", "h2", ".hero-description"]
      }
    },
    {
      "@type": "Course",
      "name": "Certified Ethical Hacker (CEH) Training",
      "description": "Comprehensive ethical hacking certification course covering penetration testing, vulnerability assessment, and cybersecurity best practices.",
      "provider": {
        "@id": "https://cyberteckmaster.com/#organization"
      },
      "educationalCredentialAwarded": "Certified Ethical Hacker",
      "courseMode": "online",
      "hasCourseInstance": {
        "@type": "CourseInstance",
        "courseMode": "online",
        "duration": "P12W",
        "startDate": "2025-02-01",
        "endDate": "2025-04-26"
      }
    },
    {
      "@type": "Service",
      "serviceType": "Cybersecurity Consulting",
      "provider": {
        "@id": "https://cyberteckmaster.com/#organization"
      },
      "areaServed": "Worldwide",
      "availableChannel": {
        "@type": "ServiceChannel",
        "serviceUrl": "https://cyberteckmaster.com/services",
        "serviceSmsNumber": "+1-800-555-CYBER"
      }
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is zero trust cybersecurity?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Zero trust cybersecurity is a security framework that assumes no user or device should be trusted by default, requiring continuous verification and authentication for all access requests, following NIST 800-207 guidelines."
          }
        },
        {
          "@type": "Question",
          "name": "How long does it take to become a certified ethical hacker?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Our Certified Ethical Hacker (CEH) program typically takes 12 weeks to complete with dedicated study. The course includes hands-on labs, real-world scenarios, and preparation for industry certification exams."
          }
        }
      ]
    }
  ]
};
---

<Layout 
  title={seoData.title}
  description={seoData.description}
  keywords={seoData.keywords}
  ogImage={seoData.ogImage}
  canonicalURL={seoData.canonicalURL}
  structuredData={structuredData}
  author={seoData.author}
  publishedTime={seoData.publishedTime}
  modifiedTime={seoData.modifiedTime}
  type={seoData.type}
  locale={seoData.locale}
>
  <!-- Preload Critical Resources -->
  <link rel="preload" href="/fonts/inter-var.woff2" as="font" type="font/woff2" crossorigin slot="head">
  <link rel="preload" href="/images/hero-background.webp" as="image" slot="head">
  
  <!-- DNS Prefetch for External Resources -->
  <link rel="dns-prefetch" href="//fonts.googleapis.com" slot="head">
  <link rel="dns-prefetch" href="//cdnjs.cloudflare.com" slot="head">
  
  <!-- Resource Hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com" slot="head">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin slot="head">
  
  <main>
    <!-- Critical Above-the-Fold Content -->
    <Hero />
    
    <!-- Core Services Section -->
    <Services />
    
    <!-- Key Features -->
    <Features />
    
    <!-- FAQ Section for Rich Snippets -->
    <FAQ />
    
    <!-- Conversion-focused CTA -->
    <CTA />
  </main>
</Layout>

<style>
  /* Critical CSS for Above-the-Fold Content */
  main {
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Performance Optimizations */
  img {
    loading: lazy;
    decoding: async;
  }

  /* Core Web Vitals Optimizations */
  * {
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  /* Font Display Optimization */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: url('/fonts/inter-var.woff2') format('woff2-variations');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
  }

  /* Prevent Layout Shift */
  .hero-container {
    min-height: 100vh;
    contain: layout;
  }

  /* Accessibility Improvements */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Focus Management */
  :focus-visible {
    outline: 2px solid #00aaff;
    outline-offset: 2px;
  }

  /* Dark Mode Support */
  @media (prefers-color-scheme: dark) {
    :root {
      --bg-primary: #0a0a0a;
      --text-primary: #ffffff;
      --accent: #00aaff;
    }
  }
</style>

<script type="module">
  // Critical JavaScript for Core Web Vitals
  
  // Preload Next Page Resources
  const preloadNextPage = () => {
    const links = document.querySelectorAll('a[href^="/"]');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const link = entry.target;
          const href = link.getAttribute('href');
          if (href && !document.querySelector(`link[href="${href}"]`)) {
            const prefetchLink = document.createElement('link');
            prefetchLink.rel = 'prefetch';
            prefetchLink.href = href;
            document.head.appendChild(prefetchLink);
          }
          observer.unobserve(link);
        }
      });
    });
    
    links.forEach(link => observer.observe(link));
  };

  // Lazy Load Non-Critical Resources
  const lazyLoadResources = () => {
    // Load non-critical CSS
    const loadCSS = (href) => {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = href;
      link.media = 'print';
      link.onload = () => { link.media = 'all'; };
      document.head.appendChild(link);
    };

    // Load analytics after user interaction
    let interacted = false;
    const loadAnalytics = () => {
      if (interacted) return;
      interacted = true;
      
      // Google Analytics 4
      const script1 = document.createElement('script');
      script1.async = true;
      script1.src = 'https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID';
      document.head.appendChild(script1);
      
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GA_MEASUREMENT_ID', {
        page_title: document.title,
        page_location: window.location.href
      });
    };

    // Load analytics on first user interaction
    ['click', 'scroll', 'keydown'].forEach(event => {
      document.addEventListener(event, loadAnalytics, { once: true, passive: true });
    });
  };

  // Performance Monitoring
  const monitorPerformance = () => {
    // Core Web Vitals monitoring
    if ('PerformanceObserver' in window) {
      // Largest Contentful Paint
      new PerformanceObserver((entryList) => {
        const entries = entryList.getEntries();
        const lastEntry = entries[entries.length - 1];
        console.log('LCP:', lastEntry.startTime);
      }).observe({ entryTypes: ['largest-contentful-paint'] });

      // First Input Delay
      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          console.log('FID:', entry.processingStart - entry.startTime);
        }
      }).observe({ entryTypes: ['first-input'] });

      // Cumulative Layout Shift
      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          if (!entry.hadRecentInput) {
            console.log('CLS:', entry.value);
          }
        }
      }).observe({ entryTypes: ['layout-shift'] });
    }
  };

  // Service Worker Registration
  const registerServiceWorker = async () => {
    if ('serviceWorker' in navigator) {
      try {
        const registration = await navigator.serviceWorker.register('/sw.js');
        console.log('SW registered:', registration);
      } catch (error) {
        console.log('SW registration failed:', error);
      }
    }
  };

  // Initialize Performance Optimizations
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      preloadNextPage();
      lazyLoadResources();
      monitorPerformance();
      registerServiceWorker();
    });
  } else {
    preloadNextPage();
    lazyLoadResources();
    monitorPerformance();
    registerServiceWorker();
  }

  // Enhanced Error Reporting
  window.addEventListener('error', (event) => {
    console.error('JavaScript error:', event.error);
    // Send to analytics
    if (typeof gtag !== 'undefined') {
      gtag('event', 'exception', {
        description: event.error.toString(),
        fatal: false
      });
    }
  });

  // Performance API reporting
  window.addEventListener('load', () => {
    setTimeout(() => {
      const perfData = performance.getEntriesByType('navigation')[0];
      console.log('Page Load Time:', perfData.loadEventEnd - perfData.loadEventStart);
      
      // Report to analytics
      if (typeof gtag !== 'undefined') {
        gtag('event', 'timing_complete', {
          name: 'load',
          value: Math.round(perfData.loadEventEnd - perfData.loadEventStart)
        });
      }
    }, 0);
  });
</script>

<!-- Critical Resource Hints -->
<link rel="manifest" href="/manifest.json" slot="head">
<meta name="theme-color" content="#1a1a1a" slot="head">

<!-- Security Headers -->
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: https:; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com;" slot="head">
<meta http-equiv="X-Content-Type-Options" content="nosniff" slot="head">
<meta http-equiv="X-Frame-Options" content="DENY" slot="head">
<meta http-equiv="X-XSS-Protection" content="1; mode=block" slot="head">

<!-- Performance Hints -->
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width" slot="head">

<!-- Critical Business Information -->
<script type="application/ld+json" slot="head">
{
  "@context": "https://schema.org",
  "@type": "ProfessionalService",
  "name": "CyberTeckMaster",
  "image": "https://cyberteckmaster.com/images/logo.webp",
  "telephone": "+1-800-555-CYBER",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "123 Cyber Street",
    "addressLocality": "San Francisco",
    "addressRegion": "CA",
    "postalCode": "94105",
    "addressCountry": "US"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 37.7749,
    "longitude": -122.4194
  },
  "url": "https://cyberteckmaster.com",
  "priceRange": "$$",
  "openingHoursSpecification": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": [
      "Monday",
      "Tuesday", 
      "Wednesday",
      "Thursday",
      "Friday"
    ],
    "opens": "09:00",
    "closes": "17:00"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "reviewCount": "247"
  }
}
</script>
</Layout>
---
// Import other working components if any
// import Services from "../components/Services.astro"; // COMMENTED OUT because the file is missing
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Astro Page</title>
  </head>
  <body>
    <h1>Welcome to My Astro Website!</h1>
    <p>This is the homepage.</p>

    <!-- <Services /> --> <!-- COMMENTED OUT to prevent build errors -->

    <footer>
      <p>Copyright © 2025</p>
    </footer>
  </body>
</html>